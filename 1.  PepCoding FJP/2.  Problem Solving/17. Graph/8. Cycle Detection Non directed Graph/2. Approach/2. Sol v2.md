# **1я╕ПтГг ржЖржорж╛рж░ ржЖржЧрзЗрж░ ржЪрж┐ржирзНрждрж╛ (Original Approach Recap)**

1. **Cycle ржорж╛ржирзЗ:** ржПржХржЗ node ржП ржпржжрж┐ ржжрзНржмрж┐рждрзАрзЯржмрж╛рж░ ржпрж╛ржЗ тЖТ cycle ржЖржЫрзЗред
    
2. **Queue рждрзЗ push ржХрж░рж╛рж░ рж╕ржорзЯ:**
    
    - рж╢рзБржзрзБ duplicate ржХржорж╛ржирзЛрж░ ржЬржирзНржп visited ржЪрзЗржХ ржХрж░рждрж╛ржоред
        
3. **Dequeue ржХрж░рж╛рж░ рж╕ржорзЯ (ржорзВрж▓ logic):**
    
    - ржпржжрж┐ node ржЖржЧрзЗржЗ visited рж╣рзЯ тЖТ cycle detectedред
        
4. **Visited mark ржХрж░рждрж╛ржо dequeue ржХрж░рж╛рж░ рж╕ржорзЯред**
    
5. **ржПржХржЯрж╛ржЗ source ржерзЗржХрзЗ BFS ржЪрж╛рж▓рж╛рждрж╛ржо (mostly node 0 ржмрж╛ ржпрзЗржЯрж╛ ржжрж┐рждрж╛ржо)ред**
    

---

# **2я╕ПтГг ржЖржорж╛рж░ ржЪрж┐ржирзНрждрж╛рж░ ржпрзЗ Lacking ржЫрж┐рж▓ (Key Problems)**

ржПржЧрзБрж▓рзЛ рждрзЛржорж╛рж░ ржЖржЧрзЗрж░ solution ржП ржЫрж┐рж▓ ржПржмржВ ржПржЯрж╛ рждрзЛржорж╛ржХрзЗ wrong result ржжрж┐ржЪрзНржЫрж┐рж▓ **disconnected graph** ржПред

## ЁЯФ╣ **2.1 Lacking #1 тАФ Only ONE BFS run**

рждрзБржорж┐ BFS ржЪрж╛рж▓рж╛ржЪрзНржЫрж┐рж▓рзЗ рж╢рзБржзрзБ ржПржХржЯрж╛ starting node ржерзЗржХрзЗред

ЁЯСЙ ржХрж┐ржирзНрждрзБ Graph **disconnected рж╣рж▓рзЗ** ржЕржирзНржп components ржЧрзБрж▓рзЛ explore ржЗ рж╣ржмрзЗ ржирж╛ред

ЁЯСЙ Cycle ржпржжрж┐ ржЕржирзНржп component ржП ржерж╛ржХрзЗ, рждрзБржорж┐ detect ржХрж░рждрзЗ ржкрж╛рж░ржмрзЗ ржирж╛ред

---

## ЁЯФ╣ **2.2 Lacking #2 тАФ Dequeue-based visited marking Problem**

рждрзЛржорж╛рж░ logic ржЫрж┐рж▓:
```java
if (isVisited[node])
    cycle
else
    isVisited[node] = true

```

ржПржЯрж╛ normal BFS logic ржирж╛ред  
ржПрждрзЗ ржХрж┐ржЫрзБ cases ржП "false cycle" detect рж╣рзЯ  
ржЖрж░ ржХрж┐ржЫрзБ cases ржП cycle miss рж╣рзЯред

---

## ЁЯФ╣ **2.3 Lacking #3 тАФ Parent concept рждрзЛржорж╛рж░ ржЪрж┐ржирзНрждрж╛рзЯ ржЫрж┐рж▓ ржирж╛**

Undirected graph ржП cycle detect ржХрж░рждрзЗ ржЧрзЗрж▓рзЗ parent ржЫрж╛рзЬрж╛ lock ржХрж░рж╛ ржпрж╛рзЯ ржирж╛ред

рждрзЛржорж╛рж░ approach ржП:

> тАЬржЖржЧрзЗ visit рж╣рзЯ? рждрж╛рж╣рж▓рзЗ cycle!тАЭ

ржХрж┐ржирзНрждрзБ undirected graph ржП:
```java
0 - 1
|   |
2 - 3

```

ржПржЦрж╛ржирзЗ neighbour ржПрж░ parent node ржЖржмрж╛рж░ ржлрж┐рж░рзЗ ржПрж▓рзЗ рждрзБржорж┐ ржнрзБрж▓ ржХрж░рзЗ ржПржЯрж╛ржХрзЗ cycle ржзрж░рзЗ ржирж┐рждрзЗ ржкрж╛рж░рждрзЗред

---

## ЁЯФ╣ **2.4 Lacking #4 тАФ Disconnected graph ржП visited array skip рж╣ржЪрзНржЫрж┐рж▓**

рждрзБржорж┐ visited = false ржзрж░рзЗ BFS ржХрж░ржЫрж┐рж▓рзЗ, ржХрж┐ржирзНрждрзБ рждрзБржорж┐ рж╢рзБржзрзБ ржкрзНрж░ржержо component explore ржХрж░ржЫрж┐рж▓рзЗ:

```java
Component 1: 0-1-2
Component 2: 5-6-7 (cycle exists)

```

рждрзЛржорж╛рж░ BFS рж╢рзБржзрзБ first component traverse ржХрж░ржмрзЗ  
тЖТ second component ржПржХржжржоржЗ run рж╣ржмрзЗ ржирж╛  
тЖТ рждрж╛ржЗ cycle ржерж╛ржХрж▓рзЗржУ detect ржХрж░рждрзЗ ржкрж╛рж░ржмрзЗ ржирж╛ред

---

# **3я╕ПтГг ржХрзАржнрж╛ржмрзЗ ржЖржорж┐ ржПржЗ lacking overcome ржХрж░рждрзЗ ржкрж╛рж░рж┐**

ржПржЧрзБрж▓рзЛ рждрзЛржорж╛рж░ ржирж┐ржЬрзЗрж░ ржЪрж┐ржирзНрждрж╛рж░ ржжрж┐ржХ ржерзЗржХрзЗржЗ рж╕рж╛ржЬрж╛ржирзЛ рж╣рзЯрзЗржЫрзЗред

---

## **3.1 Topic: Disconnected Graph тЖТ Every Node ржерзЗржХрзЗ BFS/DFS ржЪрж╛рж▓рж╛рждрзЗ рж╣ржмрзЗ**

рждрзЛржорж╛рж░ old thinking fix ржХрж░рждрзЗ ржЪрж╛ржЗрж▓рзЗ рждрзЛржорж╛ржХрзЗ ржоржирзЗ рж░рж╛ржЦрждрзЗ рж╣ржмрзЗ:

**тАЬGraph disconnected рж╣рж▓рзЗ ржПржХржЯрж╛ржЗ BFS ржпржерзЗрж╖рзНржЯ ржирж╛редтАЭ**

ЁЯСЙ рждрж╛ржЗ рждрзЛржорж╛рж░ notebook note:

> тАЬржкрзНрж░рждрж┐ржЯрж╛ node check ржХрж░ржм:  
> ржпржжрж┐ visited[node] == false  
> рждржмрзЗ ржирждрзБржи BFS ржЪрж╛рж▓рж╛ржмредтАЭ

---

## **3.2 Topic: Visited mark should be early (when pushing OR just after removing)**

рждрзБржорж┐ ржЖржЧрзЗ ржнрж╛ржмржЫрж┐рж▓рзЗ:

> тАЬDequeue ржХрж░рж╛рж░ рж╕ржорзЯ visited mark ржХрж░ржмредтАЭ

ржПржЯрж╛ problem generate ржХрж░ржЫрж┐рж▓ред  
рждрзЛржорж╛ржХрзЗ ржоржирзЗ рж░рж╛ржЦрждрзЗ рж╣ржмрзЗтАФ

ЁЯСЙ **Visited early mark ржХрж░рж▓рзЗ unnecessary traversal ржмржирзНржз рж╣рзЯред**

Notebook note:

> тАЬVisited delay ржХрж░рж▓рзЗ false cycle detect рж╣рждрзЗ ржкрж╛рж░рзЗ  
> ржЕржержмрж╛ real cycle miss рж╣рждрзЗ ржкрж╛рж░рзЗредтАЭ

---

## **3.3 Topic: Parent ржЫрж╛рзЬрж╛ Undirected Graph ржП cycle detect SEFELY ржХрж░рж╛ ржпрж╛рзЯ ржирж╛**

Mp:  
рждрзЛржорж╛рж░ thinking fix ржХрж░рждрзЗ:

> тАЬNode ржЖржЧрзЗржЗ visited ржорж╛ржирзЗржЗ cycle ржирж╛ тАФ  
> parent node рж╣рж▓рзЗ ржПржЯрж╛ natural back-edgeредтАЭ

Notebook note:

> тАЬUndirected-ржП: visited AND neighbour != parent тЖТ cycleтАЭ

---

## **3.4 Topic: Multi-component Graph = Loop through 0..n-1**

рждрзЛржорж╛рж░ lacking ржЫрж┐рж▓ рждрзБржорж┐ рж╢рзБржзрзБ ржПржХ ржЬрж╛рзЯржЧрж╛ ржерзЗржХрзЗ BFS ржХрж░ржЫрж┐рж▓рзЗред

Notebook note:

> тАЬDisconnected graph ржорж╛ржирзЗржЗ multiple BFS runs.тАЭ

---

# **4я╕ПтГг Final Study Note (Short + Ready to Remember)**

ЁЯСЗ ржПржЯрж╛ рждрзБржорж┐ рждрзЛржорж╛рж░ notebook ржП рж▓рж┐ржЦрзЗ рж░рж╛ржЦрждрзЗ ржкрж╛рж░рзЛред

---

# ЁЯУТ **My Original Cycle-Detection Thinking & What Was Missing**

### **ЁЯФ╣ ржЖржорж╛рж░ ржЖржЧрзЗрж░ ржЪрж┐ржирзНрждрж╛**

- Node ржпржжрж┐ ржжрзНржмрж┐рждрзАрзЯржмрж╛рж░ ржкрж╛ржУржпрж╝рж╛ ржпрж╛ржпрж╝ тЖТ cycle ржЖржЫрзЗред
    
- Dequeue рж╕ржоржпрж╝ visited check ржХрж░рждрж╛ржоред
    
- ржПржХржЯрж╛ржЗ BFS ржЪрж╛рж▓рж╛рждрж╛ржоред
    

---

### **ЁЯФ╣ ржЖржорж╛рж░ ржнрзБрж▓ / lacking**

1. тЭМ Only one BFS тЖТ disconnected graph cover рж╣ржпрж╝ржирж┐ред
    
2. тЭМ Dequeue-time visited тЖТ false cycle / missed cycleред
    
3. тЭМ Parent ржзрж╛рж░ржгрж╛ ржЫрж┐рж▓ ржирж╛ тЖТ undirected graph ржП wrong detectionред
    
4. тЭМ Unvisited component ржЧрзБрж▓рзЛ ржХржЦржиржУ traverse рж╣ржд ржирж╛ред
    

---

### **ЁЯФ╣ ржХрзАржнрж╛ржмрзЗ overcome ржХрж░ржм**

- тЬФ ржкрзНрж░рждрж┐ржЯрж╛ unvisited node ржерзЗржХрзЗ BFS/DFS ржЪрж╛рж▓рж╛ржирзЛред
    
- тЬФ Visited early mark ржХрж░рж╛ (push/remove ржХрж░рж╛рж░ рж╕ржорзЯ)ред
    
- тЬФ Parent track ржХрж░рж╛ (undirected graph safe detection)ред
    
- тЬФ Cycle detection ржПрж░ correct trigger:
    
    - visited & neighbor != parent тЖТ cycleред

