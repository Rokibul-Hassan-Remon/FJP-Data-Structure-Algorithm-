# тЬЕ ржкрзНрж░рж╢рзНржи: ржХрзЗржи **predecessor .right = current** ржХрж░рж╛ рж╣рзЯ?

ЁЯСЙ ржХрзЗржи **predecessor .left** ржирзЯ?  
ЁЯСЙ right child ржХрзЗржЗ ржХрзЗржи ржмрзЗржЫрзЗ ржирзЗржУрзЯрж╛ рж╣рж▓рзЛ?  
ЁЯСЙ right ржП ржХрзА ржмрж┐рж╢рзЗрж╖рждрзНржм ржЖржЫрзЗ ржпрж╛ left ржП ржирзЗржЗ?

---
# ЁЯза ржорзВрж▓ ржзрж╛рж░ржгрж╛: Morris Traversal = In-order Traversal (L тЖТ Root тЖТ R)

In-order ржЯрзНрж░рзНржпрж╛ржнрж╛рж░рзНрж╕рж╛рж▓рзЗ flow:

```css title:"Flow of Morris Traversal"

1) left subtree explore ржХрж░рзЛ
2) ржлрж┐рж░рзЗ ржПрж╕рзЗ root visit ржХрж░рзЛ
3) рждрж╛рж░ржкрж░ right subtree explore ржХрж░рзЛ

```

ржПржЦржи рж╕ржорж╕рзНржпрж╛ рж╣рж▓рзЛ, recursion/stack ржЫрж╛рзЬрж╛ ржпржЦржи left ржерзЗржХрзЗ ржлрж┐рж░рзЗ ржЖрж╕ржмрзЛ, рждржЦржи **root ржП ржлрзЗрж░ржд ржЖрж╕рж╛рж░ ржкрже ржирзЗржЗ**ред  
ржПржЗ ржХрж╛рж░ржгрзЗржЗ ржЖржорж░рж╛ **temporary thread** ржмрж╛ржирж╛ржЗред

---

# ЁЯОп Predecessor ржХрж╛ржХрзЗ ржмрж▓рзЗ?

ржПржХржЯрж┐ ржирзЛржбрзЗрж░ **in-order predecessor** =  
ЁЯСЙ рждрж╛рж░ left subtree-рж░ ржоржзрзНржпрзЗ рж╕ржмржЪрзЗрзЯрзЗ ржбрж╛ржиржжрж┐ржХрзЗ ржерж╛ржХрж╛ ржирзЛржб (rightmost node in left subtree)

ржХрж╛рж░ржг In-order ржП flow:
```css 

... (left subtree) тЖТ root тЖТ ...

```

рждрж╛ржЗ left subtree рж╢рзЗрж╖ ржХрж░рзЗ **ржЕржмрж╢рзНржпржЗ root ржП ржлрж┐рж░рждрзЗ рж╣ржмрзЗ**

---

# тЭУ рждрж╛рж╣рж▓рзЗ thread ржХрзЛржерж╛ржпрж╝ рж▓рж╛ржЧрж╛ржмрзЛ?

ржЖржорж░рж╛ ржжрж╛ржБрзЬрж┐рзЯрзЗ ржЖржЫрж┐ predecessor ржирзЛржбрзЗред  
ржПржЦржи ржЖржорж╛ржжрзЗрж░ ржЖржмрж╛рж░ current (root) ржП ржлрж┐рж░рзЗ ржЖрж╕рждрзЗ рж╣ржмрзЗред

ЁЯСЙ ржПржЦржи ржжрзЗржЦрзЛ: **predecessor ржПрж░ naturally ржХрзЛржи right child ржирзЗржЗ!**  
ржХрж╛рж░ржг рж╕рзЗ left subtree-рж░ **рж╕ржмржЪрзЗрзЯрзЗ ржбрж╛ржиржжрж┐ржХрзЗрж░ ржирзЛржб**ред

тЬЕ рждрж╛ржЗ _predecessor .right_ * ржлрж╛ржБржХрж╛ ржерж╛ржХрзЗред  
тЬЕ ржПржЗ ржлрж╛ржБржХрж╛ ржЬрж╛рзЯржЧрж╛рждрзЗржЗ ржЖржорж░рж╛ temporary link (thread) ржмрж╛ржирж╛рждрзЗ ржкрж╛рж░рж┐ред

```css

predecessor.right = current   (thread рждрзИрж░рж┐)

```

---
# ЁЯЪл рждрж╛рж╣рж▓рзЗ predecessor .left ржХрзЗржи ржирзЯ?

predecessor .left = current ржХрж░рж▓рзЗ ржХрзА рж╣рждрзЛ?

ЁЯСЗ ржжрзЗржЦрж┐:

- predecessor ржпрзЗрж╣рзЗрждрзБ left subtree-рждрзЗ ржЖржЫрзЗ, рждрж╛рж░ left child ржЖржЫрзЗ ржмрж╛ ржерж╛ржХрждрзЗ ржкрж╛рж░рзЗред
    
- left child рж╕рзНржерж╛рзЯрзА child, traversal logic ржнрзЗржЩрзЗ ржпрзЗрждред
    
- ржПржмржВ in-order ржП left subtree ржЖржЧрзЗ visit рж╣ржУржпрж╝рж╛ ржЙржЪрж┐ржд, ржХрж┐ржирзНрждрзБ ржЖржорж░рж╛ ржЙрж▓рзНржЯрзЛржнрж╛ржмрзЗ root ржХрзЗ left child ржП ржмрж╕рж┐рзЯрзЗ ржжрж┐ржЪрзНржЫрж┐ тЖТ **flow break!**
    

тЬЕ рждрж╛ржЗ **left child modify ржХрж░рж╛ ржпрж╛ржмрзЗ ржирж╛**, ржХрж╛рж░ржг рждрж╛ natural tree structure ржирж╖рзНржЯ ржХрж░ржмрзЗред

---

# тЬЕ Right child modify ржХрж░рж╛рж░ рзйржЯрж╛ main рж╕рзБржмрж┐ржзрж╛:

### тЬЕ (1) predecessor. right ржмрзЗрж╢рж┐рж░ржнрж╛ржЧ рж╕ржорзЯрзЗ NULL ржерж╛ржХрзЗ

ЁЯСЙ рж╕рзЗ ржХрж╛рж░ржгрзЗржЗ safe to use

### тЬЕ (2) In-order flow ржЕржирзБржпрж╛рзЯрзА predecessor ржПрж░ ржкрж░рзЗ root ржЖрж╕рж╛рж░ ржХржерж╛

ЁЯСЙ рждрж╛ржЗ right pointer ржжрж┐рзЯрзЗ root ржП ржлрзЗрж░ржд ржпрж╛ржУрзЯрж╛ logically perfect

### тЬЕ (3) Cleanup рж╕рж╣ржЬ

ржПржХ рж╕ржорзЯ ржЖржорж░рж╛ рж╕рзЗржЗ рж▓рж┐ржВржХ detect ржХрж░рждрзЗ ржкрж╛рж░рж┐ (predecessor .right == current) ржмрзБржЭрж┐ тЖТ тАЬржПржЯрж╛ ржЖржорж╛ржжрзЗрж░ рждрзИрж░рж┐ threadтАЭ тЖТ  
**predecessor .right = null ржХрж░рзЗ delete ржХрж░рзЗ ржжрзЗржЗ** тЬЕ tree original form ржП ржлрж┐рж░рзЗ ржпрж╛рзЯред

---

# ЁЯзк ржЙржжрж╛рж╣рж░ржг ржжрж┐рзЯрзЗ ржмрзБржЭрж┐:
```css
      10
     /
    5
     \
      8

```

**In-order**: 5 тЖТ 8 тЖТ 10

10 ржПрж░ predecessor = 8 (left subtree-рж░ рж╕ржмржЪрзЗрзЯрзЗ right node)

тЬЕ 8.right = null тЖТ temporary ржнрж╛ржмрзЗ 10 assign ржХрж░рж╛ ржпрж╛рзЯ  
тЬЕ 8.left modify ржХрж░рж▓рзЗ flow ржнрзЗржЩрзЗ ржпрзЗржд

---

# ЁЯМН High-Level Master View:

тЬЕ Morris traversal = smart trick to simulate recursion without stack  
тЬЕ inorder predecessor ржПрж░ naturally ржерж╛ржХрж╛ тАЬright = nullтАЭ space ржХрзЗ ржмрзНржпржмрж╣рж╛рж░ ржХрж░рж╛  
тЬЕ ржХрж╛рж░ржг inorder ржП left subtree тЖТ predecessor тЖТ root тЖТ right subtree  
тЬЕ рждрж╛ржЗ predecessor.right = root perfectly matches traversal order  
тЬЕ left modify ржХрж░рж▓рзЗ order ржнрзЗржЩрзЗ ржпрзЗржд

---

# ЁЯОБ Bonus Intuition:

**ржЗржЙржирж┐ржХ ржкрзНрж░ржкрж╛рж░рзНржЯрж┐ right child ржПрж░ тЖТ тАЬinorder predecessor naturally right child ржерж╛ржХрзЗ ржирж╛!тАЭ**

ржПржЯрж╛ржЗ Morris Traversal ржПрж░ ржЬрж╛ржжрзБ! ЁЯТб

---

# тЬЕ ржПржХ рж▓рж╛ржЗржирзЗ ржЙрждрзНрждрж░:

ЁЯСЙ **ржХрж╛рж░ржг inorder predecessor рж╕ржмржЪрзЗрзЯрзЗ ржбрж╛ржиржжрж┐ржХрзЗрж░ ржирзЛржб, рждрж╛рж░ right NULL ржерж╛ржХрзЗред рж╕рзЗржЗ NULL space-ржП root pointing ржХрж░рж▓рзЗ traversal order (L тЖТ Root тЖТ R) ржмржЬрж╛ржпрж╝ ржерж╛ржХрзЗ ржПржмржВ рж╕рж╣ржЬрзЗ thread remove ржХрж░рж╛ ржпрж╛рзЯред Left child modify ржХрж░рж▓рзЗ traversal order ржирж╖рзНржЯ рж╣рждрзЛред**