## ЁЯзй ржкрзНрж░ржержорзЗ рждрзЛржорж╛рж░ logic ржПржХржжржо ржарж┐ржХ:

рждрзБржорж┐ ржмрж▓рзЗржЫрзЛ тАФ
```java
int[] array = new int[n];

```

ржПржЦрж╛ржирзЗ `int` рж╣рж▓рзЛ data type  
ржПржмржВ `new int[n]` ржжрж┐рзЯрзЗ initialization рж╣ржЪрзНржЫрзЗ тЖТ тЬЕ ржПржХржжржо ржарж┐ржХ

рждрж╛рж╣рж▓рзЗ logically рждрзБржорж┐ ржнрж╛ржмржЫрзЛ:
```java
ArrayList<Integer>[] vertices = new ArrayList<Integer>[n];

```

ржПржЯрж╛ржЗ рждрзЛ ржПржХржЗ pattern рж╣ржУрзЯрж╛ ржЙржЪрж┐ржд, рждрж╛ржЗ ржирж╛?

ржХрж┐ржирзНрждрзБ Java ржПржЯрж╛ **allow ржХрж░рзЗ ржирж╛ тЭМ**

---

## ЁЯФ╣ ржХрж╛рж░ржг: Java-рждрзЗ **Generic Array Creation disallowed**

Java рждрзЗ `new ArrayList<Integer>[n]` рж▓рж┐ржЦрж▓рзЗ compile-time error ржЖрж╕рзЗ:
```java
Cannot create a generic array of ArrayList<Integer>

```

ржПрж░ ржХрж╛рж░ржг рж╣ржЪрзНржЫрзЗ тАФ **`arrays` ржЖрж░ `generics` Java рждрзЗ рж╕ржорзНржкрзВрж░рзНржг compatible ржирж╛ред**

---

## ЁЯФ╣ ржХрзЗржи?

Java-рждрзЗ arrays рж╣рж▓рзЛ **reifiable type**,  
ржорж╛ржирзЗ runtime ржП array ржЬрж╛ржирзЗ рждрж╛рж░ element-ржПрж░ type ржХрзАред  
ржХрж┐ржирзНрждрзБ **Generics рж╣рж▓рзЛ non-reifiable** тАФ runtime ржП type information ржорзБржЫрзЗ ржпрж╛рзЯ (type erasure)ред

рждрж╛рж╣рж▓рзЗ JVM ржЬрж╛ржирзЗ ржирж╛ ржЖрж╕рж▓рзЗ `ArrayList<Integer>` ржирж╛ `ArrayList<String>` store рж╣ржЪрзНржЫрзЗред

ЁЯСЙ ржлрж▓рзЗ Java ржПржЗ ржзрж░ржирзЗрж░ declaration **for safety reasons disallow ржХрж░рзЗред**

---

## ЁЯФ╣ рж╕ржорж╛ржзрж╛ржи (Workaround):

рждрзБржорж┐ ржпржЦржи ржПржЯрж╛ рж▓рзЗржЦрзЛ:
```java
ArrayList<Integer>[] vertices = new ArrayList[n];

```

ржПржЯрж╛ ржЖрж╕рж▓рзЗ compiler-ржХрзЗ тАЬtrust me, ржЖржорж┐ ржарж┐ржХ ржЬрж╛ржирж┐ ржХрзА ржХрж░ржЫрж┐тАЭ ржмрж▓рзЗ ржмрзЛржЭрж╛ржЪрзНржЫрзЗред  
ржПржЬржирзНржп compiler warning ржжрзЗрзЯ, ржХрж┐ржирзНрждрзБ ржХрж╛ржЬ ржХрж░рзЗред

рждрзБржорж┐ ржЪрж╛ржЗрж▓рзЗ warning ржЯрж╛ suppress ржХрж░рждрзЗ ржкрж╛рж░рзЛ:
```java
@SuppressWarnings("unchecked")
ArrayList<Integer>[] vertices = new ArrayList[n];

```

## ЁЯФ╣ ржПрж░ ржмрзНржпрж╛ржЦрзНржпрж╛ рж╕рж╣ржЬржнрж╛ржмрзЗ:

|Line|ржмрж╛рж╕рзНрждржм ржЕрж░рзНрже|
|---|---|
|`int[] arr = new int[n];`|Primitive array, fully type-safe тЬЕ|
|`ArrayList<Integer>[] arr = new ArrayList[n];`|Generic array creation technically unsafe тЪая╕П ржХрж┐ржирзНрждрзБ ржХрж╛ржЬ ржХрж░рзЗ|

---

## ЁЯФ╣ ржЪрж╛ржЗрж▓рзЗ alternative:

рждрзБржорж┐ ржЪрж╛ржЗрж▓рзЗ generic array ржмрж╛ржж ржжрж┐рзЯрзЗ,  
simple `List<List<Integer>>` ржмрзНржпржмрж╣рж╛рж░ ржХрж░рждрзЗ ржкрж╛рж░рзЛ (safe way):
```java
List<List<Integer>> vertices = new ArrayList<>();
for (int i = 0; i < n; i++) {
    vertices.add(new ArrayList<Integer>());
}

```

ЁЯСЙ ржПржЯрж╛ ржПржХржжржо type-safe, ржХрзЛржирзЛ warning ржжрзЗрзЯ ржирж╛,  
ржПржмржВ ржПржХржЗржнрж╛ржмрзЗ ржХрж╛ржЬ ржХрж░рзЗред

---

### ЁЯФ╕ рж╕ржВржХрзНрж╖рзЗржкрзЗ:

|ржмрж┐рж╖рзЯ|ржмрзНржпрж╛ржЦрзНржпрж╛|
|---|---|
|`new ArrayList<Integer>[n]`|тЭМ Compiler error (generic array disallowed)|
|`new ArrayList[n]`|тЪая╕П Warning ржжрзЗрзЯ, ржХрж┐ржирзНрждрзБ ржХрж╛ржЬ ржХрж░рзЗ|
|`List<List<Integer>>`|тЬЕ Safe & modern alternative|

---

ЁЯФ╣ **TL;DR (ржПржХ рж▓рж╛ржЗржирзЗ):**  
рждрзБржорж┐ ржарж┐ржХржЗ ржмрж▓рзЗржЫрзЛ ржпрзЗ pattern follow ржХрж░рж╛ ржЙржЪрж┐ржд,  
ржХрж┐ржирзНрждрзБ Java рждрзЗ generics runtime ржП ржорзБржЫрзЗ ржпрж╛рзЯ ржмрж▓рзЗ **generic array ржмрж╛ржирж╛ржирзЛ officially allowed ржирж╛** тАФ  
рждрж╛ржЗ `new ArrayList[n]` ржжрж┐рзЯрзЗржЗ ржХрж╛ржЬ ржЪрж╛рж▓рж╛рждрзЗ рж╣рзЯред

